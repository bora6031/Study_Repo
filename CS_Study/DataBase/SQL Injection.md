# SQL Injection

> 해커에 의해 조작된 SQL 쿼리문이 데이터베이스에 그대로 전달되어 비정상적 명령을 실행시키는 공격 기법
> 

### 공격 방법

1. 인증 우회
    1. input에 비밀번호를 입력함과 동시에 다른 쿼리문을 함께 입력하는 것
    2. 기본 쿼리문의 where 절에 or문을 추가하여 `‘1’=’1’` 과 같은 true문을 작성하여 무조건 적용되도록 수정한 뒤 db를 마음대로 조작할 수 있다.
2. 데이터 노출
    1. 시스템에서 발생하는 에러 메세지를 활용해 공격하는 방법
    2. get방식으로 동작하는 url 쿼리스트링을 추가 → err→이를 통해 DB구조 유추→ 해킹에 활용

### 방어 방법

- input 값을 받을 때, 특수문자 여부 검사하기
    - 로그인 전, 검증로직을 추가
    - 미리 설정한 특수문자들이 들어왔을 때 요청을 막아낸다.
- SQL 서버 오류 발생 시, 해당하는 에러 메세지 감추기
    - view를 활용하여 원본 db테이블에는 접근 권한을 높인다.
    - 일반 사용자는 view로만 접근하여 에러를 볼 수 없도록 만든다.
- preparestatement사용하기
    - 이를 사용하면, 특수문자를 자동으로 escaping 해준다.
    - statement와는 다르게 쿼리문에서 전달 인자 값을 `?` 으로 받는 것
    - 이를 활용해 서버 측에서 필터링 과정을 통해서 공격을 방어한다.
