# 컴퓨터 구조

> 컴퓨터 구조는 크게 CPU, 메모리, 디스크로 나뉘어 있다.
> 

### 마이크로프로세서 캐시 메모리

: 마이크로 프로세서에서 사용되는 기억장치의 하나.

- 중앙 처리 장치의 속도가 주기억 장치의 처리속도보다 훨씬 빠르기 때문에 프로그램의 실행속도를 중앙 처리 장치의 속도에 근접시키기 위해 만든다.
- 일반적인 램에 비해 더 빨리 액세스 할 수 있는 램
- 마이크로 프로세서(CPU)가 데이터를 처리할 때  제일 먼저 캐시 메모리에 있는지를 찾아본다.
- 만약 원하는 데이터를 찾으면 더 많은 시간이 필요한 메모리로 갈 필요가 없다

### 가상 메모리

- 물리 메모리의 크기 한계를 극복하기 위해 나온 기술
- 물리 메모리보다 큰 프로세스를 수행하기 위해 사용
- 필요한 부분만 메모리에 적재(부분적재)하는 것
    - 프로세스를 실행 할 때, 실행에 필요한 부분만 메모리에 올린다
    - 적재 여부를 페이지 테이블에 표시
- Locality of Reference: 프로그램은 어느 한 특정 작은 부분만 한동안 집중적으로 참조하는 현상
    
    ⇒ 한정된 크기의 실제 메모리를 효율적으로 사용하는 방법 필요
    
    → 프로세스의 일부분은 페이지 단위 또는 세그먼트 단위지만 현제는 대부분 페이지 단위 사용 
    
    - 현재 필요한 페이지만 메모리에 올리는 것을 요구페이징이라고 한다.

### 요구페이징(Demand Paging)

<aside>
💡 페이징 기법이란? 컴퓨터가 메인 메모리에서 사용하기 위해 2차 기억장치로부터 데이터를 저장하고 검색하는 메모리 관리 기법

</aside>

- CPU가 해당 페이지를 요구할 때까지 그 페이지를 메모리에 올리지 않는 방식
    - 한번도 접근되지 않는 페이지는 물리 메모리에 전혀 적재되지 않는다.
- 페이지 부재가 발생하면 그 때 트랩을 걸어 해당 페이지를 적재
    
  

### 페이지 부재를 처리하는 과정

1. 특정 페이지를 실행하기 위해 페이지 테이블을 참조하여 메모리가 올라와 있는지 여부를 확인.
2. 페이지 메모리에 올라와 있지 않은 경우 MMU가 인터럽트를 발생시킴 
    - MMU: CPU가 메모리에 접근하는 것을 관리하는 컴퓨터 하드웨어 부품으로 가상 메모리와 실제 메모리 사이에서 주소변환역할을 한다.(논리 메모리주소→ 물리메모리주소로 변환)
3. 운영체제는 해당 프로세스를 wait 상태로 만든다.
4. 그리고, 요구된 페이지를 하드디스크에서 찾아 메모리의 빈공간에 적재한다. 
5. 페이지 테이블을 갱신한다
6. 트랩에 의해 중단되었던 명령을 다시수행한다.(wait상태인 프로세스를 다시 ready에서 running 하여 작업을 재진행 한다.)

> `가상메모리`를 만드는 방법은 대표적으로 두가지(요구페이징, 요구 세그먼트)가 존재하지만, 대부분 요구 페이징을 사용하므로 **가상 메모리**와 **요구 페이징**을 `같은 용어`로 사용하는 경우가 많다.
> 

### 프로그램 부분 적재의 이점

- 프로그램의 크기가 물리적인 용량에 무관
- 더 많은 프로그램이 메모리를 공유하여 CPU사용률과 처리율을 향상한다.
- 주소 결속을 실행시간에 할 수 있다.
- `페이지 부재율`을 낮추어 성능을 높인다.

### 페이지 교체

- 물리 메모리에 여유가 없을 때 희생될 페이지를 찾아 교체한다.
    

    ## 페이지 대치 알고리즘
    
    1. 최적 대치 알고리즘
    2. FIFO
    3. LRU
    4. LRU 근사 알고리즘
        - Additional Reference Bit 알고리즘
        - Second Chance 알고리즘
        - LFU(Least Frequently Used)
        - MFU(Most Frequently Used)
