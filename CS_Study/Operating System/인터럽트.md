# 인터럽트

: 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 현재 실행중인 작업을 즉시 중단하고, 발생된 상황에 대해 우선처리가 필요함을 CPU에게 알리는 것 

→ 프로그램 중단 후 먼저 처리 

- 지금 수행하는 일보다 중요도가 높은 일을 우선 처리
- CPU의 하드웨어 신호에 의해 외부/내부 인터럽트가 발생
- 명령어의 수행에 의해 소프트웨어 인터럽트 발생

### 외부 인터럽트

: 입출력 장치, 타이밍 장치, 전원등 외부적인 요인으로 발생

- 전원이상
- 기계착오
- 외부신호
- 입출력

### 내부 인터럽트

: Trap이라고 부르며, 잘못된 명령이나 데이터를 사용할 때 발생

- 0으로 나누기 발생
- 오버플로우
- 명령어를 잘못 사용한 경우

### 소프트웨어 인터럽트

: 프로그램 처리 중 명령의 요청에 의해 발생한 것 

- 사용자가 프로그램을 실행시킬 때 발생
- 소프트웨어 이용 중에 다른 프로세스를 실행시키면 시분할 처리를 위해 자원할당 동작이 수행된다.

### 인터럽트 처리 과정

1. 인터럽트 원천인 하드웨어에서 또는 예외상황이 발생하거나 소프트웨어 인터럽트가 걸리면:(명령어 실행단계를 마칠 때마다 중앙처리장치는 반복적으로 인터럽트 요청이 있는지 확인한다.)
2. 현재 진행 중인 기계어 코드를 완료한다. (명령어 사이클인 인출과 실행 단계를 일단 마친다.)
3. CPU의 특수레지스터 중, 하이로인터럽트 마스크 비트를 보고 마스크 되면 인터럽트 무시 한다.
4. 인터럽트 벡터를 읽고ISR(인터럽트 서비스 루틴, 인터럽트 핸들러)주소값을 얻는다.ISR로 점프 한다. 이때PC(Program Counter, IP) 값은 자동 대피 저장된다.
5. 현재 진행중인 프로그램의 레지스터를 대피한다.해당 코드를 실행한다.
6. 해당 일을 다 처리하면, 대피시킨 레지스터를 복원한다
7. .ISR의 끝에 IRET 명령어에 의해 인터럽트가 해제 된다.
8. IRET 명령어가 실행되면, 대피시킨 PC 값을 복원하여 이전 실행 위치로 복원한다.
